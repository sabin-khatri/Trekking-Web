<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Your Trek | Nepal Treks</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; }
        
        /* Animation classes */
        .animate-on-scroll { 
            opacity: 0; 
            transform: translateY(30px); 
            transition: opacity 0.8s ease-out, transform 0.8s ease-out; 
        }
        .is-visible { 
            opacity: 1; 
            transform: translateY(0); 
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-up { 
            animation: fadeInUp 0.8s ease-out forwards; 
        }
        
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
            animation: blob 7s infinite;
        }
        .animation-delay-2000 {
            animation-delay: 2s;
        }
        
        .booking-header-bg {
            background-image: url('https://images.unsplash.com/photo-1660314002642-77bbfe3e9b48?w=900&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8dHJlayUyMGJvb2tpbmclMjBwYWdlfGVufDB8fDB8fHww');
            background-size: cover;
            background-position: center;
            position: relative;
        }
        .booking-header-bg::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0.6));
            z-index: 1;
        }
        .booking-header-bg > div {
            position: relative;
            z-index: 2;
        }
        .input-focus-animation:focus {
            outline: none;
            border-color: #10B981; /* green-500 */
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.4); /* green-500 with transparency */
        }
        .bg-gradient-green {
            background: linear-gradient(to right, #10B981, #059669); /* green-500 to green-700 */
        }
        .hover\:bg-gradient-green-dark:hover {
            background: linear-gradient(to right, #059669, #047857); /* darker green gradient */
        }
        
        /* Popup Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
        }
        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 24px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            text-align: center;
            animation: fadeInUp 0.4s ease-out;
        }
        .modal-close {
            background: linear-gradient(to right, #10B981, #059669);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            transition: background 0.3s ease, transform 0.3s ease;
        }
        .modal-close:hover {
            background: linear-gradient(to right, #059669, #047857);
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-700">

    <!-- Fixed Top Section with Back and Book Buttons -->
    <div class="fixed top-0 left-0 w-full bg-white py-4 px-4 sm:px-6 lg:px-8 shadow-sm z-50">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <a href="packages.html" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-full transition-all duration-300 flex items-center">
                <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Back to Packages
            </a>
            <button type="submit" form="bookingForm" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-full shadow-md transition-all duration-300 transform hover:scale-105">
                Submit Booking
            </button>
        </div>
    </div>

    <!-- Page Header -->
    <header class="booking-header-bg h-[60vh] md:h-[70vh] flex items-center justify-center pt-20">
        <div class="text-center text-white px-4 relative z-10">
            <h1 class="text-4xl md:text-6xl font-extrabold fade-in-up drop-shadow-lg">Book Your Trek</h1>
            <p class="mt-4 text-lg md:text-xl fade-in-up" style="animation-delay: 0.3s;">Secure your spot on an unforgettable Himalayan adventure. Our team will contact you to confirm details and pricing.</p>
        </div>
    </header>

    <!-- Booking Form Section -->
    <section class="py-20 bg-white relative overflow-hidden">
        <!-- Background Circles for Animation -->
        <div class="absolute -top-1/4 -left-1/4 w-96 h-96 bg-green-100 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"></div>
        <div class="absolute -bottom-1/4 -right-1/4 w-96 h-96 bg-blue-100 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"></div>

        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="bg-gradient-to-br from-green-50 to-white p-8 md:p-12 rounded-3xl shadow-2xl border border-green-200 animate-on-scroll">
                <h2 class="text-3xl md:text-4xl font-extrabold text-green-800 mb-8 text-center">Booking Details</h2>
                <p class="text-center text-slate-600 mb-6 fade-in-up">Please fill out the form below. Our team will contact you to discuss pricing and confirm your booking.</p>
                
                <form id="bookingForm" class="space-y-6">
                    <div class="fade-in-up" style="animation-delay: 0.2s;">
                        <label for="trekName" class="block text-sm font-medium text-slate-700 mb-1">Trek Name</label>
                        <input type="text" name="trekName" id="trekName" readonly class="w-full px-4 py-3 bg-slate-100 border border-slate-300 rounded-lg shadow-sm">
                    </div>
                    <div class="fade-in-up" style="animation-delay: 0.3s;">
                        <label for="fullName" class="block text-sm font-medium text-slate-700 mb-1">Full Name</label>
                        <input type="text" name="fullName" id="fullName" required class="w-full px-4 py-3 border border-slate-300 rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500 input-focus-animation transition-all duration-200" placeholder="Your Full Name">
                    </div>
                    <div class="fade-in-up" style="animation-delay: 0.4s;">
                        <label for="email" class="block text-sm font-medium text-slate-700 mb-1">Email Address</label>
                        <input type="email" name="email" id="email" required class="w-full px-4 py-3 border border-slate-300 rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500 input-focus-animation transition-all duration-200" placeholder="sabin@gmail.com">
                    </div>
                    <div class="fade-in-up" style="animation-delay: 0.5s;">
                        <label for="phone" class="block text-sm font-medium text-slate-700 mb-1">Phone Number</label>
                        <input type="tel" name="phone" id="phone" required class="w-full px-4 py-3 border border-slate-300 rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500 input-focus-animation transition-all duration-200" placeholder="98XXXXXXXX">
                    </div>
                    <div class="fade-in-up" style="animation-delay: 0.6s;">
                        <label for="numberOfPeople" class="block text-sm font-medium text-slate-700 mb-1">Number of People</label>
                        <input type="number" name="numberOfPeople" id="numberOfPeople" min="1" required class="w-full px-4 py-3 border border-slate-300 rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500 input-focus-animation transition-all duration-200" placeholder="1">
                    </div>
                    <div class="fade-in-up" style="animation-delay: 0.7s;">
                        <label for="preferredDate" class="block text-sm font-medium text-slate-700 mb-1">Preferred Start Date</label>
                        <input type="date" name="preferredDate" id="preferredDate" required class="w-full px-4 py-3 border border-slate-300 rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500 input-focus-animation transition-all duration-200">
                    </div>
                    <div class="fade-in-up" style="animation-delay: 0.8s;">
                        <label for="additionalNotes" class="block text-sm font-medium text-slate-700 mb-1">Additional Notes</label>
                        <textarea name="additionalNotes" id="additionalNotes" rows="4" class="w-full px-4 py-3 border border-slate-300 rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500 input-focus-animation transition-all duration-200" placeholder="Any special requests or questions..."></textarea>
                    </div>
                    <div class="fade-in-up" style="animation-delay: 0.9s;">
                        <button type="submit" class="w-full inline-flex justify-center py-3 px-6 border border-transparent shadow-md text-lg font-medium rounded-full text-white bg-gradient-green hover:bg-gradient-green-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-300 transform hover:scale-105">
                            Submit Booking
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Popup Modal -->
    <div id="successModal" class="modal">
        <div class="modal-content">
            <h2 class="text-2xl font-bold text-green-800 mb-4">Success!</h2>
            <p class="text-lg text-slate-700 mb-6">Your booking request has been submitted successfully. Our team will contact you soon to confirm details and pricing.</p>
            <button class="modal-close" onclick="closeModal()">Close</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-green-800 text-white">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-4 gap-8">
            <div class="col-span-1 md:col-span-1">
                <h3 class="text-2xl font-bold">Nepal<span class="text-green-400">Treks</span></h3>
                <p class="mt-4 text-green-200">Crafting unforgettable Himalayan adventures since 2010.</p>
            </div>
            <div>
                <h4 class="text-lg font-semibold text-green-300">Quick Links</h4>
                <ul class="mt-4 space-y-2">
                    <li><a href="index.html" class="hover:text-green-400 transition-colors">Home</a></li>
                    <li><a href="about.html" class="hover:text-green-400 transition-colors">About Us</a></li>
                    <li><a href="packages.html" class="hover:text-green-400 transition-colors">Our Treks</a></li>
                    <li><a href="contact.html" class="hover:text-green-400 transition-colors">Contact</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-lg font-semibold text-green-300">Contact</h4>
                <ul class="mt-4 space-y-2 text-green-200">
                    <li class="flex items-start"><span class="mr-2 mt-1">‚úâ</span> info@nepaltreks.com</li>
                    <li class="flex items-start"><span class="mr-2 mt-1">‚òé</span> +977 123 456789</li>
                    <li class="flex items-start"><span class="mr-2 mt-1">üìç</span> Belbari, Morang, Nepal</li>
                </ul>
            </div>
            <div>
                <h4 class="text-lg font-semibold text-green-300">Follow Us</h4>
                <div class="mt-4 flex space-x-4">
                    <a href="#" class="text-green-200 hover:text-white transition-colors">
                        <span class="sr-only">Facebook</span>
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg>
                    </a>
                    <a href="#" class="text-green-200 hover:text-white transition-colors">
                        <span class="sr-only">Instagram</span>
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.013-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.08 2.525c.636-.247 1.363-.416 2.427-.465C9.53 2.013 9.884 2 12.315 2zM12 7a5 5 0 100 10 5 5 0 000-10zm0 8a3 3 0 110-6 3 3 0 010 6zm6.406-11.845a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5z" clip-rule="evenodd" /></svg>
                    </a>
                </div>
            </div>
        </div>
        <div class="mt-8 border-t border-green-700 py-6 text-center text-green-300">
            <p>¬© 2025 Nepal Treks. All Rights Reserved. Adventure Awaits.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get query parameters from URL
            const urlParams = new URLSearchParams(window.location.search);
            const trek = urlParams.get('trek') || 'Unknown Trek';

            // Populate form field
            document.getElementById('trekName').value = trek;

            // Scroll animation
            const scrollElements = document.querySelectorAll('.animate-on-scroll');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            scrollElements.forEach(el => observer.observe(el));

            // Form submission with popup
            const bookingForm = document.getElementById('bookingForm');
            const successModal = document.getElementById('successModal');

            bookingForm.addEventListener('submit', (e) => {
                e.preventDefault();

                // Basic client-side validation
                const fullName = document.getElementById('fullName').value.trim();
                const email = document.getElementById('email').value.trim();
                const phone = document.getElementById('phone').value.trim();
                const numberOfPeople = document.getElementById('numberOfPeople').value;
                const preferredDate = document.getElementById('preferredDate').value;

                if (fullName && email && phone && numberOfPeople && preferredDate) {
                    // Show popup
                    successModal.style.display = 'block';
                    bookingForm.reset();
                    document.getElementById('trekName').value = trek; // Restore trek name after reset
                }
            });

            // Close modal and redirect
            window.closeModal = function() {
                successModal.style.display = 'none';
                // Check referrer for redirect
                const referrer = document.referrer;
                const validDetailPages = [
                    'everest-base-camp.html?trek=Everest%20Base%20Camp',
                    'annapurna.html?trek=Annapurna%20Circuit',
                    'langtang-valley.html?trek=Langtang%20Valley',
                    'gokyo-lakes.html?trek=Gokyo%20Lakes',
                    'manaslu-details.html?trek=Manaslu%20Circuit',
                    'poon-hill-trek.html?trek=Poon%20Hill%20Trek',
                ];
                const referrerPath = referrer.split('/').pop();
                if (referrer && validDetailPages.some(page => referrerPath.includes(page))) {
                    window.location.href = referrer;
                } else {
                    window.location.href = 'packages.html';
                }
            };

            // Close modal when clicking outside
            window.onclick = function(event) {
                if (event.target === successModal) {
                    closeModal();
                }
            };
        });
    </script>
</body>
</html>